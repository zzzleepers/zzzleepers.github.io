<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C++简明笔记 - zzzleeper</title>

    <link rel="icon" type="image/x-icon" href="https://avatars.githubusercontent.com/u/132760387?v=4&size=32">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { 
            margin: 0; 
            background: #000; 
            color: #fff; 
            font-family: "仿宋", serif; 
        }
        header { 
            padding: 15px; 
        }
        .menu { 
            margin: 0; 
            padding: 10px; 
            list-style: none; 
            text-align: center; 
        }
        .menu li { 
            display: inline; 
            margin: 0 10px; 
        }
        .menu a { 
            color: #fff; 
            text-decoration: none; 
            font-family: "仿宋", serif; 
        }
        .container { 
            max-width: 800px; 
            margin: 30px auto; 
            padding: 0 20px; 
        }
        h1 { 
            text-align: center; 
            margin-bottom: 40px; 
        }
        .blog-list { 
            list-style: none; 
            padding: 0; 
        }
        .blog-item { 
            margin: 20px 0; 
            padding: 15px; 
            border-bottom: 1px solid #444; 
            transition: all 0.3s ease;
        }
        .blog-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
            transform: translateX(5px);
        }
        .blog-item a { 
            color: #fff; 
            text-decoration: none; 
            font-size: 1.2em; 
        }
        .blog-item a:hover {
            color: #66ccff;
        }
        .blog-date { 
            color: #aaa; 
            font-size: 0.9em; 
            margin-top: 5px; 
        }
        footer { 
            margin-top: 50px; 
            font-size: 14px; 
            text-align: center; 
            font-family: "仿宋", serif; 
            width: 100%; 
            clear: both; 
            padding: 15px 0;
        }
        .signature { 
            margin: 10px 0; 
        }
        .icp { 
            margin: 5px 0; 
        }
        .loading {
            text-align: center;
            padding: 40px;
            color: #aaa;
        }
        .error {
            text-align: center;
            padding: 40px;
            color: #ff6666;
        }
        .info {
            text-align: center;
            padding: 10px;
            color: #aaa;
            font-size: 0.9em;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <header>
        <ul class="menu">
            <li><a href="https://zzzleepers.github.io/index.html">主页</a></li>
            <li><a href="https://zzzleepers.github.io/blog">博客</a></li>
            <!--<li><a href="https://zzzleepers.github.io/about">关于</a></li>-->
            <li><a href="https://zzzleepers.github.io/contact">联系</a></li>
            <li><a href="https://zzzleepers.github.io/links">链接</a></li>
        </ul>
    </header>

    <div class="container">
        <h1>C++简明笔记 - 目录</h1>
        
        <div class="info" id="loadingInfo">
            <i class="fas fa-info-circle"></i> 自动加载最新博客列表中...
        </div>
        
        <ul class="blog-list" id="blogList">
            <li class="loading">
                <i class="fas fa-spinner fa-spin"></i> 正在获取文件列表...
            </li>
        </ul>
    </div>

    <footer>
        <div class="signature">你好，远方的客人。</div>
        <div class="icp"><a href="https://icp.gov.moe/?keyword=20254447" style="color: white; text-decoration: none;" target="_blank">萌ICP备20254447号</a></div>
        <div>© 2025 zzzleeper</div>
    </footer>

    <script>
        // 从GitHub API获取文件列表
        document.addEventListener('DOMContentLoaded', function() {
            const blogListElement = document.getElementById('blogList');
            const loadingInfoElement = document.getElementById('loadingInfo');
            // GitHub API端点 - 获取cpp目录下的文件列表
            const githubApiUrl = 'https://api.github.com/repos/zzzleepers/zzzleepers.github.io/contents/blog/cpp';
            
            fetch(githubApiUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP错误: ${response.status}`);
                    }
                    return response.json();
                })
                .then(files => {
                    // 隐藏加载信息
                    loadingInfoElement.classList.add('hidden');
                    
                    // 清空加载提示
                    blogListElement.innerHTML = '';
                    
                    // 筛选HTML文件并排除当前索引页
                    const htmlFiles = files.filter(file => 
                        file.name.endsWith('.html') && 
                        file.name.toLowerCase() !== 'index.html'
                    );
                    
                    // 按更新时间排序（最新的在前）
                    htmlFiles.sort((a, b) => new Date(b.updated_at) - new Date(a.updated_at));
                    
                    if (htmlFiles.length === 0) {
                        blogListElement.innerHTML = '<li class="info"><i class="fas fa-folder-open"></i> 该目录下没有找到博客文件</li>';
                        return;
                    }
                    
                    // 动态生成博客列表
                    htmlFiles.forEach(file => {
                        // 从文件名中移除.html后缀作为标题
                        const title = file.name.replace('.html', '');
                        
                        // 格式化日期显示
                        const updateDate = new Date(file.updated_at);
                        const formattedDate = updateDate.toLocaleDateString('zh-CN', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric'
                        });
                        
                        const listItem = document.createElement('li');
                        listItem.className = 'blog-item';
                        
                        listItem.innerHTML = `
                            <a href="${file.name}">${title}</a>
                            <div class="blog-date">更新时间: ${formattedDate}</div>
                        `;
                        
                        blogListElement.appendChild(listItem);
                    });
                })
                .catch(error => {
                    console.error('获取文件列表失败:', error);
                    // 隐藏加载信息
                    loadingInfoElement.classList.add('hidden');
                    blogListElement.innerHTML = `
                        <li class="error">
                            <i class="fas fa-exclamation-triangle"></i> 无法加载博客列表<br>
                            错误: ${error.message}
                        </li>
                    `;
                });
        });
    </script>
</body>
</html>
