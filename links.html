<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>链接 - zzzleeper的博客</title>
    <link rel="icon" type="image/x-icon" href="https://avatars.githubusercontent.com/u/132760387?v=4&size=32">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { 
            margin: 0; 
            background: #000; 
            color: #fff; 
            font-family: "仿宋", serif; 
            line-height: 1.6;
            padding-bottom: 30px;
        }
        header { 
            padding: 15px; 
            border-bottom: 1px solid #333;
        }
        .menu { 
            margin: 0; 
            padding: 0; 
            list-style: none; 
            text-align: center; 
        }
        .menu li { 
            display: inline-block; 
            margin: 0 15px; 
        }
        .menu a { 
            color: #fff; 
            text-decoration: none; 
            font-family: "仿宋", serif; 
            padding: 5px 10px;
            transition: all 0.3s;
        }
        .menu a:hover {
            color: #55bb8a;
            background: #222;
            border-radius: 4px;
        }
        .container { 
            max-width: 1200px; 
            margin: 20px auto; 
            padding: 0 15px; 
        }
        h1 { 
            text-align: center; 
            margin: 15px 0 20px; 
            padding-bottom: 10px;
            border-bottom: 1px solid #444;
            font-size: 1.8em;
        }
        .intro {
            text-align: center; 
            margin: 0 0 20px; 
            color: #aaa;
            font-size: 0.95em;
        }
        /* 卡片容器 - 紧凑排列在一行 */
        .link-groups-wrapper {
            display: flex;
            flex-wrap: wrap;
            gap: 12px; /* 卡片之间的间距，控制紧凑程度 */
        }
        /* 卡片样式 */
        .link-group {
            flex: 1;
            min-width: 250px; /* 最小宽度，避免过窄 */
            margin: 0;
            padding: 15px;
            background: #1a1a1a; /* 稍灰的背景色 */
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        .link-group h3 {
            margin: 0 0 12px;
            color: #55bb8a;
            padding-bottom: 8px;
            border-bottom: 1px dashed #444;
            font-size: 1.1em;
        }
        .links-container {
            display: flex;
            flex-direction: column;
            gap: 8px; /* 链接之间的间距 */
            margin: 0;
            padding: 0;
        }
        .link-item {
            list-style: none;
            position: relative;
        }
        .link-item a {
            display: inline-block;
            color: #e0e0e0;
            text-decoration: none;
            padding: 5px 8px;
            background: #252525;
            border-radius: 3px;
            transition: all 0.2s;
            font-size: 0.95em;
            line-height: 1.4;
        }
        .link-item a:hover {
            background: #333;
            color: #55bb8a;
        }
        .link-item img {
            vertical-align: middle;
            margin-right: 5px;
            max-height: 18px;
        }
        /* 悬停显示的简介 */
        .link-desc {
            visibility: hidden;
            opacity: 0;
            position: absolute;
            bottom: 100%;
            left: 0;
            background: #222;
            color: #ddd;
            padding: 8px 10px;
            border-radius: 4px;
            width: 280px;
            max-width: 90vw;
            font-size: 0.85em;
            pointer-events: none;
            transition: all 0.2s;
            z-index: 10;
            box-shadow: 0 2px 8px rgba(0,0,0,0.4);
        }
        .link-item:hover .link-desc {
            visibility: visible;
            opacity: 1;
            bottom: calc(100% + 8px);
        }
        .link-desc::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 15px;
            border-width: 5px;
            border-style: solid;
            border-color: #222 transparent transparent transparent;
        }
        footer { 
            margin-top: 30px; 
            font-size: 14px; 
            text-align: center; 
            font-family: "仿宋", serif; 
            width: 100%; 
            clear: both; 
            padding: 15px 0;
            border-top: 1px solid #333;
        }
        .signature { 
            margin: 8px 0; 
            font-size: 0.9em;
        }
        .icp { 
            margin: 5px 0; 
            font-size: 0.85em;
        }
        /* 音乐控制区 */
        .music-control {
            margin: 10px 0;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <header>
        <ul class="menu">
            <li><a href="index.html">主页</a></li>
            <li><a href="index.html">博客</a></li>
            <li><a href="about">关于</a></li>
            <li><a href="contact">联系</a></li>
            <li><a href="links">链接</a></li>
        </ul>
    </header>

    <div class="container">
        <h1>链接 - Links</h1>
        <p class="intro">让我们走得更远。</p>
        
        <!-- 卡片容器 - 紧凑排列在一行 -->
        <div class="link-groups-wrapper" id="linkContainer">
            <!-- 内容将通过JS从JSON加载 -->
        </div>
    </div>

    <footer>
        <div class="signature"><p style="color: gray;">【若未加载内容请刷新等待links-data.json文件加载】</p></div>
        <div class="signature"><p style="color: yellow;">【本人不对站外网站负责,若链接失效/有问题,请联系我.】</p></div>

        <div class="music-control">
          <audio id="bgMusic" src="https://zzzleepers.github.io/plus/Green%20to%20blue%20(speed%20up).mp3" loop></audio>
          <button onclick="togglePlay()" style="background:#1a1a1a;color:#55bb8a;border:1px solid #55bb8a;padding:3px 8px;cursor:pointer;font-size:0.9em;">
            <i id="playIcon" class="fas fa-pause"></i>
          </button>
          <span style="color:#55bb8a;margin-left:5px;">Green to blue (speed up)</span>
        </div>

        <script>
        const audio = document.getElementById('bgMusic');
        const icon = document.getElementById('playIcon');
        const STORAGE_KEY = 'musicPosition';

        // 页面加载时恢复播放位置
        window.addEventListener('load', () => {
          const savedTime = localStorage.getItem(STORAGE_KEY);
          if (savedTime) {
            audio.currentTime = parseFloat(savedTime);
          }
          
          // 尝试自动播放
          audio.play().catch(e => {
            icon.className = 'fas fa-play';
          });
          
          // 监听播放状态更新图标
          audio.addEventListener('play', () => {
            icon.className = 'fas fa-pause';
          });
          
          audio.addEventListener('pause', () => {
            icon.className = 'fas fa-play';
          });
          
          // 定期保存播放位置
          setInterval(() => {
            if (!audio.paused) {
              localStorage.setItem(STORAGE_KEY, audio.currentTime.toString());
            }
          }, 1000);
          
          // 页面卸载前保存播放位置
          window.addEventListener('beforeunload', () => {
            if (!audio.paused) {
              localStorage.setItem(STORAGE_KEY, audio.currentTime.toString());
            }
          });
        });

        function togglePlay() {
          if (audio.paused) {
            audio.play();
          } else {
            audio.pause();
          }
        }

        // 处理浏览器自动播放限制
        window.addEventListener('click', () => {
          if (audio.paused) audio.play().catch(e => {});
        }, { once: true });
        </script>

        <div class="icp"><a href="https://icp.gov.moe/?keyword=20254447" style="color: white; text-decoration: none;" target="_blank">萌ICP备20254447号</a></div>
        <div>© 2025 zzzleeper</div>
    </footer>

    <script>
        // 从JSON文件加载链接数据并渲染
        fetch('links-data.json')
            .then(response => response.json())
            .then(data => {
                const container = document.getElementById('linkContainer');
                
                // 遍历所有链接分组
                data.groups.forEach(group => {
                    // 创建分组卡片
                    const groupDiv = document.createElement('div');
                    groupDiv.className = 'link-group';
                    
                    // 创建分组标题
                    const groupTitle = document.createElement('h3');
                    groupTitle.textContent = group.title;
                    groupDiv.appendChild(groupTitle);
                    
                    // 创建链接列表
                    const linksList = document.createElement('ul');
                    linksList.className = 'links-container';
                    
                    // 遍历分组内的链接
                    group.links.forEach(link => {
                        const listItem = document.createElement('li');
                        listItem.className = 'link-item';
                        
                        // 创建链接元素
                        const linkElement = document.createElement('a');
                        linkElement.href = link.url;
                        linkElement.target = '_blank';
                        linkElement.rel = 'noopener';
                        if (link.title) linkElement.title = link.title;
                        if (link.style) linkElement.style = link.style;
                        
                        // 如果有图标，添加图标
                        if (link.icon) {
                            const iconImg = document.createElement('img');
                            iconImg.src = link.icon;
                            iconImg.alt = link.name;
                            linkElement.appendChild(iconImg);
                            linkElement.appendChild(document.createTextNode(' ' + link.name));
                        } else {
                            linkElement.textContent = link.name;
                        }
                        
                        // 添加描述框
                        const descDiv = document.createElement('div');
                        descDiv.className = 'link-desc';
                        descDiv.innerHTML = link.description;
                        
                        // 组合元素
                        listItem.appendChild(linkElement);
                        listItem.appendChild(descDiv);
                        linksList.appendChild(listItem);
                    });
                    
                    groupDiv.appendChild(linksList);
                    container.appendChild(groupDiv);
                });
            })
            .catch(error => console.error('加载链接数据失败:', error));
    </script>
</body>
</html>
